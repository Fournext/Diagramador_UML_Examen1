<div class="side-panel">

  <div
    class="palette-item"
    cdkDrag
    [cdkDragData]="{ type: 'class' }"
    (cdkDragEnded)="onDragEnded($event)">
    <div class="item-content">ğŸ“¦ Clase UML</div>
  </div>

  <div
    class="palette-item"
    cdkDrag
    [cdkDragData]="{ type: 'association' }"
    (cdkDragEnded)="onDragEnded($event)">
    <div class="item-content">ğŸ”— AsociaciÃ³n</div>
  </div>

  <div
    class="palette-item"
    cdkDrag
    [cdkDragData]="{ type: 'generalization' }"
    (cdkDragEnded)="onDragEnded($event)">
    <div class="item-content">â¬†ï¸ Herencia</div>
  </div>

  <div
    class="palette-item"
    cdkDrag
    [cdkDragData]="{ type: 'aggregation' }"
    (cdkDragEnded)="onDragEnded($event)">
    <div class="item-content">â—‡ AgregaciÃ³n</div>
  </div>

  <div
    class="palette-item"
    cdkDrag
    [cdkDragData]="{ type: 'composition' }"
    (cdkDragEnded)="onDragEnded($event)">
    <div class="item-content">â—† ComposiciÃ³n</div>
  </div>

  <div
    class="palette-item"
    cdkDrag
    [cdkDragData]="{ type: 'dependency' }"
    (cdkDragEnded)="onDragEnded($event)">
    <div class="item-content">â‹¯ Dependencia</div>
  </div>

  <button class="save-btn" (click)="onSaveClicked()">ğŸ’¾ Guardar</button>

  <!-- Chatbot panel -->
  <div class="chatbot-panel">
    <h4>ğŸ¤– Generar modelo</h4>
    <textarea [(ngModel)]="prompt"
              placeholder="Describe tu modelo aquÃ­..."
              rows="4"></textarea>
    <button class="generate-btn" (click)="onGenerate()">Generar</button>
  </div>

   <!-- Panel de validaciones -->
  <div class="validation-panel">
    <div class="validation-header" (click)="toggleValidationPanel()">
      <h4>ğŸ” Sugerencias del modelo</h4>
      <span>{{ validationCollapsed ? 'â•' : 'â–' }}</span>
    </div>
    <button (click)="analyzeNow()">ğŸ” Analizar modelo</button>
    <div *ngIf="!validationCollapsed" class="validation-content">
      <div *ngIf="!validationResult">
        <p>No hay validaciones aÃºn.</p>
      </div>

      <div *ngIf="validationResult">
        <!-- Validas -->
        <h5>âœ… Relaciones vÃ¡lidas</h5>
        <ul>
          <li *ngFor="let v of validationResult.analysis.validas">
            <strong>{{ v.relacion }}</strong><br />
            <small>{{ v.razon }}</small>
          </li>
        </ul>

        <!-- Errores -->
        <h5>âŒ Errores</h5>
        <ul>
          <li *ngFor="let e of validationResult.analysis.errores">
            <strong>{{ e.relacion }}</strong><br />
            <small>{{ e.problema }}</small><br />
            <em>Sugerencia: {{ e.sugerencia }}</em>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
